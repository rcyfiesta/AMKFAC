casualtySelect.addEventListener('change', () => {

    const selectedScenario = scenarioSelect.value;
    const selectedCasualty = casualtySelect.value;

    const q = query(collection(db, "scenarios"));

    onSnapshot(q, snapshot => {
        snapshot.forEach(doc => {
            const data = doc.data();

            if (
                data.scenarioNumber === selectedScenario &&
                data.casualtyName === selectedCasualty
            ) {

                displayScenario.textContent = data.scenarioNumber;
                displayCasualty.textContent = data.casualtyName;

                displayInjuries.textContent =
                    data.visibility?.injuries ? data.injuries.join(", ") : "";

                displayWhatHappened.textContent =
                    data.visibility?.whatHappened ? data.whatHappened : "";

                displayMedicalHistory.textContent =
                    data.visibility?.medicalHistory ? data.medicalHistory : "";

                displayAllergies.textContent =
                    data.visibility?.allergies ? data.allergies : "";

                displayLastMeal.textContent =
                    data.visibility?.lastMeal ? data.lastMeal : "";
            }
        });
    });
});